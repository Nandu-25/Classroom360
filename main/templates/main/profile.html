{% extends 'layout.html' %}
{% load static %}
{% block links %}
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-colors-2021.css">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap">

{% endblock %}
{% block css %}
<link rel="stylesheet" type="text/css" media="screen" href="{% static 'main/styles/profile.css' %}">
{% endblock %}

{% block body %}
<div class="w3-container w3-round-xlarge" style="width: 100%; height:auto; ">
    <div class="w3-row-padding">
        <div class="w3-col w3-card-4 w3-round-xxlarge w3-container" style="width: 20%; margin-top: 30px; margin-bottom: 25px; height: 920px; margin-right: 15px; background-color: #2c4776;">
            <div class="w3-container w3-center w3-round-xxlarge " style="margin-top:25px; margin-right:20px; margin-left:20px; padding-top:10px; background-color: #6f82a797;">
                <img id="profileImage1" src="{{ request.user.profilepic.url }}" class="w3-circle" width="150px" height="150px" style="border-radius: 50%;">
                <p style="color: white;"><b>{{request.user.first_name}} {{request.user.last_name}}</b></p>
                <p style="margin-top:-10px; color: white; font-size: small;">{{request.user.email}}</p>
            </div>
            <hr class="w3-border w3-grey" style="border: 2px; margin: 20px 0; margin-bottom: 15px;">
            <div class="w3-container" style="margin-top:-10px;">
                <p style="width: 100%; text-align: center; color: white; padding: 0; border: 0; margin: 0;"><b style="font-size: 30px; font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">MENU</b></p>
                <hr class="w3-border w3-grey" style="margin:0 -12px ;margin-bottom: 20px; border: 2px;">
                <a href="/" style='text-decoration:none;'><button class="w3-button w3-xlarge" style="margin-left: 30px;border-radius: 20px; width: 260px;display: block; color:white;"><i class="fa fa-home"></i> Home</button></a>
                <!-- <button class="w3-button w3-hover-red w3-ripple " style="display: block;color: white;"><i class="fa fa-file"></i> COURSES</button> -->
                <a href="/home/announcements/{{id}}" style='text-decoration:none;'><button class="w3-button w3-xlarge" style="margin-left: 30px;border-radius: 20px;width: 260px;display: block;color: white;"><i class="fa fa-dashboard"></i> Announcements</button></a>
                <a href="{% url 'calendar' %}" style='text-decoration:none;'><button class="w3-button w3-xlarge" style="margin-left: 30px;border-radius: 20px;width: 260px; display: block;color: white;  "><i class="fa fa-calendar"></i> Calendar</button></a>
                <a href="{% url 'courseSelect' %}" style="text-decoration:none;"><button class="w3-button w3-xlarge" style="margin-left: 30px;border-radius: 20px;width: 260px; display: block;color: white; "><i class="fa fa-book"></i> Course</button></a>
                <a href="{% url 'changepwd' %}" style="text-decoration:none;"><button class="w3-button w3-xlarge" style="margin-left: 30px;border-radius: 20px;width: 260px; display: block;color: white; "><i class="fa fa-key"></i> Change password</button></a>
                <!-- <button class="w3-button w3-xlarge" style="display: block; color:white;"><i class="fa fa-file"></i> COURSES</button> -->
            </div>
            <div class="w3-container w3-center" style="margin-top:12px;">
            <button class="w3-button w3-ripple w3-round-xxlarge" style="background-color: #f3763e;font-size: large; margin-top:190px; padding:15px 25px;">LOGOUT <i class="fa fa-sign-out"></i></button>
            </div>
        </div>
        <div class="w3-container w3-col" style="background-color: #d8f7ea;border-radius: 40px; margin-top: 25px; margin-bottom: 25px; height: 920px; padding-top: 20px;padding-left:40px; margin-right: 15px; width:60%;">
        <h1 style="font-size:  55px;font-family: roboto system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; color: #000;">My Account</h1>
        <p style="margin-top: -10px; font-size:18px; color:#000;">You can change your account settings here</p>
        <button class="w3-button w3-white" style="margin-top: 15px; width: 160px; border-top: 5px solid red; border-top-left-radius: 10px; " onclick="OpenTab('Personal_Info')">Personal Info</button>
        <button class="w3-button w3-white" style="margin-top: 15px; width: 150px;margin-left: -7px; border-top: 5px solid #96c9c5;border-top-right-radius: 10px; " onclick="OpenTab('Performance')">Performance</button>
        <div class="w3-container w3-white" style="height: 695px; width:100%; padding-top: 10px;padding-left:25px;border-bottom-left-radius: 40px;border-bottom-right-radius: 40px;border-top-right-radius: 40px;">
        <div id="Personal_Info" class="w3-display-container Tab">
            <button id="editFieldsButton" class="w3-display-topright" onclick="editFields()"><i class="fa fa-pencil"></i></button>
            <button id="cancelFieldsButton" class="w3-display-topright" onclick="cancelFields()" style="margin-right: 20px; display: none;">Cancel</button>
            
        <h2 style="color: #757575;">Your Basic Information</h2>
        <hr style="border: 0.5px dotted grey; margin-top: -3px;">
        <div class="w3-row-padding">
            <div class="w3-half">
                <p><strong>Full Name:</strong></p>
                <p class="w3-container " id="FullName" style="background: color darkcyan;height:40px;text-align: left;padding-top:8px;padding-left:5px;border:2px solid black;border-radius:15px;font-style:unset;">{{request.user.first_name}} {{request.user.last_name}}</p>
            </div>
            <div class="w3-half">
                <p><strong>Email Id:</strong></p>
                <p class="w3-input w3-border-black w3-round-xxlarge " id="EmailId" style="border:2px solid black;border-radius:15px;" >{{request.user.email}}</p>
            </div>
        </div>
        <form method = "POST" action= "" id = "addForm">
            {% csrf_token %}
        <div class="w3-row-padding">
            <div class="w3-half">
                <p><strong>Enrollment Number:</strong></p>
                <p class="w3-input w3-border-black w3-round-xxlarge " style="border:2px solid black;border-radius:15px;" id="EnrollmentNumber">{{request.user.enrollment}}</p>
            </div>
                <input name = "iden" value="2" style = "display : none;">
                
            <div class="w3-half">
                <p><strong>Mobile Number:</strong></p>
                <p id="MobileNumber">
                    <span id="MobileNumberDisplay" class="w3-input w3-border-black w3-round-xxlarge " style="height:40px;text-align: left;padding-top:8px;padding-left:5px;border:2px solid black;border-radius:15px;font-style:unset;">{{request.user.mobile}}</span>
                    <input type="text" name="mobileInput" class="w3-input w3-border-black w3-round-xlarge" style="border:2px solid black;border-radius:15px; display:none" required pattern="[0-9]{10}" id="MobileNumberInput" style="display: none;">
                </p>
            </div>
            
        </div>
        <div class="w3-row-padding">
            <div class="w3-half">
                <p><strong>Branch:</strong></p>
                <p class="w3-input w3-border-black w3-round-xxlarge" style="border:2px solid black;border-radius:15px;" id="Branch">Computer Science And Engineering</p>
            </div>
        </div>
        <div class="w3-row-padding">
            <div class="w3-half">
                <p><strong>Address:</strong></p>
                <p class="w3-input w3-border-black w3-round-xxlarge " style="border:2px solid black;border-radius:15px; width: 715px; max-width:715px; height: 80px;display:block;" id="Address">{{request.user.address}}</p>
                <textarea type="text" name="addressInput" class="w3-input w3-border-black w3-round-xlarge" id="AddressInp" style="display: none;width: 715px; max-width:715px;height:80px;overflow-y: scroll;border:2px solid black;border-radius:15px;"></textarea>
            </div>
            <div class="w3-half"></div>
            <div class="w3-row-padding">
                <div class="w3-col" style="width:45%;">
                    <p><strong>State/Union Teritory:</strong></p>
                    <p class="w3-container " id="state" style="background: color darkcyan;height:40px;text-align: left;padding-top:8px;padding-left:5px;border:2px solid black;border-radius:15px;font-style:unset;width:300px">{{request.user.State}}</p>
                    
                        <div class="form-group col-md-4">
                          <label for="inputState"></label>
                          <select name="inputState" class="form-control w3-border-black w3-round-xxlarge" id="inputState" style="border:2px solid black;border-radius:15px; height:40px; display:none;" disabled>
                                              <option value="SelectState">Select State</option>
                                              <option value="Andra Pradesh">Andra Pradesh</option>
                                              <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                              <option value="Assam">Assam</option>
                                              <option value="Bihar">Bihar</option>
                                              <option value="Chhattisgarh">Chhattisgarh</option>
                                              <option value="Goa">Goa</option>
                                              <option value="Gujarat">Gujarat</option>
                                              <option value="Haryana">Haryana</option>
                                              <option value="Himachal Pradesh">Himachal Pradesh</option>
                                              <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                              <option value="Jharkhand">Jharkhand</option>
                                              <option value="Karnataka">Karnataka</option>
                                              <option value="Kerala">Kerala</option>
                                              <option value="Madya Pradesh">Madya Pradesh</option>
                                              <option value="Maharashtra">Maharashtra</option>
                                              <option value="Manipur">Manipur</option>
                                              <option value="Meghalaya">Meghalaya</option>
                                              <option value="Mizoram">Mizoram</option>
                                              <option value="Nagaland">Nagaland</option>
                                              <option value="Orissa">Orissa</option>
                                              <option value="Punjab">Punjab</option>
                                              <option value="Rajasthan">Rajasthan</option>
                                              <option value="Sikkim">Sikkim</option>
                                              <option value="Tamil Nadu">Tamil Nadu</option>
                                              <option value="Telangana">Telangana</option>
                                              <option value="Tripura">Tripura</option>
                                              <option value="Uttaranchal">Uttaranchal</option>
                                              <option value="Uttar Pradesh">Uttar Pradesh</option>
                                              <option value="West Bengal">West Bengal</option>
                                              <option disabled style="background-color:#aaa; color:#fff">UNION Territories</option>
                                              <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
                                              <option value="Chandigarh">Chandigarh</option>
                                              <option value="Dadar and Nagar Haveli">Dadar and Nagar Haveli</option>
                                              <option value="Daman and Diu">Daman and Diu</option>
                                              <option value="Delhi">Delhi</option>
                                              <option value="Lakshadeep">Lakshadeep</option>
                                              <option value="Pondicherry">Pondicherry</option>
                                            </select>
                        </div>
                    
                </div>

                <div class="w3-col" style="width:32%;">
                    <p><strong>District:</strong></p>
                    <p class="w3-container " id="district" style="background: color darkcyan;height:40px;text-align: left;padding-top:8px;padding-left:5px;border:2px solid black;border-radius:15px;font-style:unset;width:300px">{{request.user.district}}</p>
                    
                    <div class="form-group col-md-4">
                        <label for="inputDistrict"></label>
                        <select class="form-control w3-border-black w3-round-xxlarge" name="districtInput" id="inputDistrict" style="border:2px solid black;border-radius:15px; height:40px;display:none;" disabled>
                            <option value="">-- select one -- </option>
                        </select>
                      </div>
                    
                    
                </div>
                
                <div class="w3-col" style="width:15%;">
                    <p><strong>Pincode:</strong></p>
                    <p id="Pincode">
                        <span id="PincodeDisplay" class="w3-input w3-border-black w3-round-xxlarge" style="border:2px solid black;border-radius:15px; height:40px;">{{request.user.pincode}}</span>
                        <input type="text" name="pincodeInput" class="w3-input w3-border-black w3-round-xlarge" required pattern="[0-9]{6}" id="PincodeInput" style="border:2px solid black;border-radius:15px;display: none;">
                    </p>
                </div>
                <button id="saveFieldsButton" type="submit" style="display: none;margin-bottom:-20px;width:80px; " class="w3-display-bottomright" onclick="submitfor()"  >Save</button>
            
            </div>
        </div>
    </form>
    </div>
    <div  id="Performance" class="w3-container Tab" style="display: none;">
        <h2 style="color: #757575;">Performance</h2>
        <hr style="border: 0.5px dotted grey; margin-top: -3px;">
        
        {% for course in courses %}
        <button class="w3-button w3-white" style="margin-top: 15px; width: 100px;margin-right: -7px; border-top: 5px solid #96c9c5; " onclick="Openbutton('course{{forloop.counter}}')">{{course.code}}</button>
        {% endfor %}
        {% for course in courses %}
        <div class="w3-row course" style="margin-top:20px;" id="course{{forloop.counter}}">
            <h1 style="margin-bottom:20px; margin-top:-10px;">{{course.name}}</h1>
            <div class="w3-half" style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
                <h2 style="margin-top:-5px;">Class Attendance</h2>
                <div class="skill" data-percent="65">
                    <div class="outer">
                        <div class="inner">
                            <div class="number">
                                {% for att in course.attendCards.all %}
                                {% if att.student == request.user %}
                                {{att.percentage}}%
                                {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="160px" height="160px">
                        <defs>
                            <linearGradient id="GradientColor{{forloop.counter}}">
                                <stop offset="0%" stop-color="#e91e63" />
                                <stop offset="100%" stop-color="#673ab7" />
                            </linearGradient>
                        </defs>
                        <circle  cx="80" cy="80" r="70" stroke-linecap="round" style="fill:none; ; stroke-width:20px; stroke-dasharray:472; stroke-dashoffset:472; animation: draw 2s linear forwards;stroke:url(#GradientColor{{forloop.counter}})"id="circle{{forloop.counter}}" />
                    </svg>
                </div>
            </div>
            <div class="w3-half" style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
                <h2 style="margin-top:-5px;">Grade</h2>
                <div class="skill1" data-percent="10">
                    <div class="outer1">
                        <div class="inner1">
                            <div class="number1">
                                {% for grade in course.grades.all %}
                                {% if grade.student == request.user%}
                                {{grade.grade}}
                                {% endif %}
                                {% endfor%}
                            </div>
                        </div>
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="160px" height="160px">
                        <defs>
                            <linearGradient id="GradientColors{{forloop.counter}}">
                                <stop offset="0%" stop-color="#e91e63" />
                                <stop offset="100%" stop-color="#673ab7" />
                            </linearGradient>
                        </defs>
                        <circle  cx="80" cy="80" r="70" stroke-linecap="round" style="fill:none;  stroke-width:20px; stroke-dasharray:472; stroke-dashoffset:472; animation: draw1 2s linear forwards;stroke:url(#GradientColor{{forloop.counter}});"  id="circles{{forloop.counter}}"> 
                    </svg>                        
                </div>
            </div>
        </div> 
        {% endfor %}
        {% comment %} </div>   {% endcomment %}

        






    </div>
</div>
</div>
 <div class="w3-rest" style="background-color: #2c4776; height:920px;margin-top:25px;margin-left:20px; border-radius: 40px;">
    <div class="w3-container w3-card-4" style="height:330px;margin-left:20px;margin-right:20px;margin-top:50px;padding-left:25px;padding-top:10px;border-radius: 40px; background-color: #8fc0c3;">
    <h3>My Profile</h3>
    <hr style="border: 0.5px dotted grey; margin-top: -3px;">
    <div class="w3-container w3-center w3-display-container">
        <div class="w3-dropdown-click">
            <img src="{{ request.user.profilepic.url }}" id="profileImage" class="w3-circle w3-button-red" width="150px" height="150px" style="border-radius: 50%; margin-left:-17px; " onclick="myFunction()">
            <div id="Demo" class="w3-dropdown-content w3-bar-block w3-card-4 w3-animate-zoom">
                <a id="delete" class="w3-bar-item w3-button" onclick="Deleteprofile()">Delete</a>
                <form id="profileform" method="POST" action="" enctype="multipart/form-data">
                    {% csrf_token %}
                    <input name = "iden" value="0" style = "display : none;">
                <label for="fileInput" class="w3-bar-item w3-button" style="cursor: pointer;">New Profile</label>
                <input type="file" name = "file"id="fileInput" style="display: none;" accept=".jpeg, .jpg, .png" onchange="updateProfileImage()">
                <button type="submit" id="submitimg" style="display: none;"></button>
                </form>
            </div>
        </div>
    </div>
    
    <p class="w3-center" style="font-size: small;margin-top:20px;">Upload new profile pic here</p>
    </div>
    <div class="w3-display-container w3-card-4" style="background-color: #8fc0c3; height:330px;margin-left:20px;margin-right:20px;margin-top:30px;padding-left:25px;padding-top:10px;border-radius: 40px">
        <h3>About Me</h3>
    <hr style="border: 0.5px dotted grey; margin-top: -3px;">
    <div class="w3-container">
        <p id="bioText" style="display: block; height:140px; width:auto;">{{request.user.bio}}</p>
        <div class="edit-container" style="height: 175px;">
            <p id="editbutton" class="w3-button w3-display-bottomright" onclick="editBio()"><i class="fa fa-pencil"></i></p>
            <form id="profileform" method="POST" action="" enctype="multipart/form-data">
                {% csrf_token %}
                <input name = "iden" value="1" style = "display : none;">
            <textarea type="text" name="bioin" id="editInput" class="edit-input" style="display: none; height:140px; width:auto;overflow-y: scroll;"></textarea>
            <button id="saveButton" class="w3-display-bottomright" type="submit" style="display: none;" onclick="saveBio()">Save</button>
            </form>
        </div>
    </div>
        </div>
        
    </div>
    </div>
</div>
</div>
</div>
{% endblock body %}

{% block js %}
<script>
    function submitfor() {
    const newMobileNumber = document.getElementById("MobileNumberInput").value;
      const newPincode = document.getElementById("PincodeInput").value;
      const addressInput = document.getElementById("AddressInp").value;
      const mobileNumberDisplay = document.getElementById("MobileNumberDisplay");
      const mobileNumberInput = document.getElementById("MobileNumberInput");
      const pincodeDisplay = document.getElementById("PincodeDisplay");
      const pincodeInput = document.getElementById("PincodeInput");
      const editFieldsButton = document.getElementById("editFieldsButton");
      const saveFieldsButton = document.getElementById("saveFieldsButton");
      const addressElement = document.getElementById("Address");
      const selectedState = document.getElementById("inputState").value;
      const selectedDistrict = document.getElementById("inputDistrict").value;
      
      if (/^[0-9]{10}$/.test(newMobileNumber) && /^[0-9]{6}$/.test(newPincode)) {
          mobileNumberDisplay.textContent = newMobileNumber;
          document.getElementById("state").style.display ='inline-block';
      document.getElementById("district").style.display = 'inline-block';
      document.getElementById("inputState").style.display ="none";
      document.getElementById("AddressInp").style.display = 'none';
      document.getElementById("Address").style.display ="inline-block";
      document.getElementById("inputDistrict").style.display = "none";
          mobileNumberDisplay.style.display = "inline-block";
          mobileNumberInput.style.display = "none";
          pincodeDisplay.textContent = newPincode;
          pincodeDisplay.style.display = "inline-block";
          pincodeInput.style.display = "none";
          editFieldsButton.style.display = "inline-block";
          saveFieldsButton.style.display = "none";
          addressElement.style.border="2px black solid";
          document.getElementById("cancelFieldsButton").style.display="none";
          if(addressInput.length>150){
              addressInput=addressInput.substring(0,200);
          }
          addressElement.innerHTML = addressInput;
          addressElement.style.height = "auto"; 
          addressElement.style.overflow = "hidden";
          addressElement.style.height = (addressElement.scrollHeight) + "px";
      } else {
          if (!(/^[0-9]{10}$/.test(newMobileNumber)) && !(/^[0-9]{6}$/.test(newPincode))) {
              alert("Please verify your mobile number and Pincode");
          } else if (!(/^[0-9]{10}$/.test(newMobileNumber)) && (/^[0-9]{6}$/.test(newPincode))) {
              alert("Please verify your mobile number");
          } else {
              alert("Please verify your pincode");
          }
      }
    }
    function OpenTab(TabName) {
    var i;
    var x = document.getElementsByClassName("Tab");
    for (i = 0; i < x.length; i++) {
      x[i].style.display = "none";  
    }
    document.getElementById(TabName).style.display = "block";  
    const buttons = document.querySelectorAll("button");
              buttons.forEach(button => {
                  button.style.borderTopColor = "#96c9c5";
              });
      const clickedButton = document.querySelector(`[onclick="OpenTab('${TabName}')"]`);
      clickedButton.style.borderTopColor = "red";
      loadcircle();
      
  }

  function hello(){
    var y = document.getElementsByClassName("course");
     for (j = 1; j < y.length; j++) {
         y[j].style.display = "none";
     }
  }
  hello();
  
  function Openbutton(CourseName) {
     var j;
     var y = document.getElementsByClassName("course");
     for (j = 0; j < y.length; j++) {
         y[j].style.display = "none";
     }
     console.log(CourseName);
     document.getElementById(CourseName).style.display = "block";
     
     var buttons = document.querySelectorAll("button");
              buttons.forEach(button => {
                  button.style.borderTopColor = "#96c9c5";
              });
      var clickedButton = document.querySelector(`[onclick="Openbutton('${CourseName}')"]`);
      clickedButton.style.borderTopColor = "red";
      loadcircle();
  }
  
  function cancelFields() {
      const addressElement = document.getElementById("Address");
      const addressInput = document.getElementById("Address").querySelector("textarea");
      const originalAddress = addressInput.value;
      addressElement.style.border="2px black solid";
      document.getElementById("MobileNumberDisplay").style.display = "inline-block";
      document.getElementById("MobileNumberInput").style.display = "none";
      document.getElementById("PincodeDisplay").style.display = "inline-block";
      document.getElementById("PincodeInput").style.display = "none";
      document.getElementById("editFieldsButton").style.display = "inline-block";
      document.getElementById("cancelFieldsButton").style.display = "none";
      document.getElementById("saveFieldsButton").style.display = "none";
      document.getElementById("state").style.display ='inline-block';
      document.getElementById("district").style.display = 'inline-block';
      document.getElementById("inputState").style.display ="none";
      document.getElementById("inputDistrict").style.display = "none";
      document.getElementById("inputState").disabled = true;
      document.getElementById("inputDistrict").disabled = true;
      document.getElementById("AddressInp").style.display = 'none';
      document.getElementById("Address").style.display ="inline-block";
      addressInput.remove();
      addressElement.innerText = originalAddress;
  }
  
  function editFields() {
      const addressElement = document.getElementById("Address");
      const originalAddress = addressElement.innerText;
      addressElement.style.border="none";
      const addressInput = document.createElement("textarea");
      addressInput.style.width = "700px";
      addressInput.style.height = "auto"; 
      addressInput.style.border = "2px solid black";
      addressInput.style.borderRadius = "15px";
      addressInput.value = originalAddress;
  
      addressElement.innerHTML = ''; 
      addressElement.appendChild(addressInput);
      addressInput.id = "Address-input";
      document.getElementById("MobileNumberDisplay").style.display = "none";
      document.getElementById("MobileNumberInput").style.display = "inline-block";
      document.getElementById("PincodeDisplay").style.display = "none";
      document.getElementById("PincodeInput").style.display = "inline-block";
      document.getElementById("editFieldsButton").style.display = "none";
      document.getElementById("cancelFieldsButton").style.display = "inline-block";
      document.getElementById("saveFieldsButton").style.display = "inline-block";
      document.getElementById("inputState").disabled = false;
      document.getElementById("inputDistrict").disabled = false;
      document.getElementById("inputState").style.display ="inline-block";
      document.getElementById("inputDistrict").style.display = "inline-block";
      document.getElementById("state").style.display ='none';
      document.getElementById("district").style.display = 'none';
      document.getElementById("AddressInp").style.display = 'inline-block';
      document.getElementById("Address").style.display ="none";
  }
  


           
      function handleMobileNumberInput() {
      const mobileNumberInput = document.getElementById("MobileNumberInput");
      if (mobileNumberInput.value.length > 10) {
          alert("Mobile number cannot be more than 10 digits.");
          mobileNumberInput.value = mobileNumberInput.value.substring(0,10);
      }
  }
  document.getElementById("MobileNumberInput").addEventListener("input",handleMobileNumberInput);
        function handlePincode(){
        const pincodeInput = document.getElementById("PincodeInput");
          if(pincodeInput.value.length>6){
          alert("Pincode cannot be more than 6 digits");
          }
          pincodeInput.value=pincodeInput.value.substring(0,6);
        }
  document.getElementById("PincodeInput").addEventListener("input",handlePincode);
  
  function loadcircle() {
      let skillElements = document.querySelectorAll(".skill");
      skillElements.forEach((element, index) => {
          let numberElement = element.querySelector(".number");
          let circleElement = element.querySelector(`#circle${index + 1}`);
          let percent = parseFloat(numberElement.innerHTML);

          let strokeDashoffset = 472 - (percent / 100) * 472;
          circleElement.style.strokeDashoffset = strokeDashoffset;
          numberElement.innerText = "0%";
          let counter = 0;
              let interval = setInterval(() => {
                  if (counter == percent) {
                      clearInterval(interval);
                  }
                  else {
                      counter += 1;
                      numberElement.innerHTML = counter + "%";
                  }
              }, 50);
          if (percent >= 75) {
              numberElement.style.color = "green";
          } else {
              numberElement.style.color = "red";
          }
      });
      
      let skillElements1 = document.querySelectorAll(".skill1");
      skillElements1.forEach((element, index) => {
      let numberElement1 = element.querySelector(".number1");
      let circleElement1 = element.querySelector(`#circles${index + 1}`);
      let percent1 = parseFloat(numberElement1.innerHTML);
      let strokeDashoffsett = 472 - (percent1 / 10) * 472;
      circleElement1.style.strokeDashoffset = strokeDashoffsett;
      numberElement1.innerText = "0";
      let counters = 0;
          let interval = setInterval(() => {
              if (counters == percent1) {
                  clearInterval(interval);
              }
              else {
                  counters += 1;
                  numberElement1.innerHTML = counters;
              }
          }, 50);
      if (percent1 >= 7.5) {
          numberElement1.style.color = "green";
      } else {
          numberElement1.style.color = "red";
      }
  });
}
  
  
  
  
  
  
  var AndraPradesh = ["Anantapur","Chittoor","East Godavari","Guntur","Kadapa","Krishna","Kurnool","Prakasam","Nellore","Srikakulam","Visakhapatnam","Vizianagaram","West Godavari"];
  var ArunachalPradesh = ["Anjaw","Changlang","Dibang Valley","East Kameng","East Siang","Kra Daadi","Kurung Kumey","Lohit","Longding","Lower Dibang Valley","Lower Subansiri","Namsai","Papum Pare","Siang","Tawang","Tirap","Upper Siang","Upper Subansiri","West Kameng","West Siang","Itanagar"];
  var Assam = ["Baksa","Barpeta","Biswanath","Bongaigaon","Cachar","Charaideo","Chirang","Darrang","Dhemaji","Dhubri","Dibrugarh","Goalpara","Golaghat","Hailakandi","Hojai","Jorhat","Kamrup Metropolitan","Kamrup (Rural)","Karbi Anglong","Karimganj","Kokrajhar","Lakhimpur","Majuli","Morigaon","Nagaon","Nalbari","Dima Hasao","Sivasagar","Sonitpur","South Salmara Mankachar","Tinsukia","Udalguri","West Karbi Anglong"];
  var Bihar = ["Araria","Arwal","Aurangabad","Banka","Begusarai","Bhagalpur","Bhojpur","Buxar","Darbhanga","East Champaran","Gaya","Gopalganj","Jamui","Jehanabad","Kaimur","Katihar","Khagaria","Kishanganj","Lakhisarai","Madhepura","Madhubani","Munger","Muzaffarpur","Nalanda","Nawada","Patna","Purnia","Rohtas","Saharsa","Samastipur","Saran","Sheikhpura","Sheohar","Sitamarhi","Siwan","Supaul","Vaishali","West Champaran"];
  var Chhattisgarh = ["Balod","Baloda Bazar","Balrampur","Bastar","Bemetara","Bijapur","Bilaspur","Dantewada","Dhamtari","Durg","Gariaband","Janjgir Champa","Jashpur","Kabirdham","Kanker","Kondagaon","Korba","Koriya","Mahasamund","Mungeli","Narayanpur","Raigarh","Raipur","Rajnandgaon","Sukma","Surajpur","Surguja"];
  var Goa = ["North Goa","South Goa"];
  var Gujarat = ["Ahmedabad","Amreli","Anand","Aravalli","Banaskantha","Bharuch","Bhavnagar","Botad","Chhota Udaipur","Dahod","Dang","Devbhoomi Dwarka","Gandhinagar","Gir Somnath","Jamnagar","Junagadh","Kheda","Kutch","Mahisagar","Mehsana","Morbi","Narmada","Navsari","Panchmahal","Patan","Porbandar","Rajkot","Sabarkantha","Surat","Surendranagar","Tapi","Vadodara","Valsad"];
  var Haryana = ["Ambala","Bhiwani","Charkhi Dadri","Faridabad","Fatehabad","Gurugram","Hisar","Jhajjar","Jind","Kaithal","Karnal","Kurukshetra","Mahendragarh","Mewat","Palwal","Panchkula","Panipat","Rewari","Rohtak","Sirsa","Sonipat","Yamunanagar"];
  var HimachalPradesh = ["Bilaspur","Chamba","Hamirpur","Kangra","Kinnaur","Kullu","Lahaul Spiti","Mandi","Shimla","Sirmaur","Solan","Una"];
  var JammuKashmir = ["Anantnag","Bandipora","Baramulla","Budgam","Doda","Ganderbal","Jammu","Kargil","Kathua","Kishtwar","Kulgam","Kupwara","Leh","Poonch","Pulwama","Rajouri","Ramban","Reasi","Samba","Shopian","Srinagar","Udhampur"];
  var Jharkhand = ["Bokaro","Chatra","Deoghar","Dhanbad","Dumka","East Singhbhum","Garhwa","Giridih","Godda","Gumla","Hazaribagh","Jamtara","Khunti","Koderma","Latehar","Lohardaga","Pakur","Palamu","Ramgarh","Ranchi","Sahebganj","Seraikela Kharsawan","Simdega","West Singhbhum"];
  var Karnataka = ["Bagalkot","Bangalore Rural","Bangalore Urban","Belgaum","Bellary","Bidar","Vijayapura","Chamarajanagar","Chikkaballapur","Chikkamagaluru","Chitradurga","Dakshina Kannada","Davanagere","Dharwad","Gadag","Gulbarga","Hassan","Haveri","Kodagu","Kolar","Koppal","Mandya","Mysore","Raichur","Ramanagara","Shimoga","Tumkur","Udupi","Uttara Kannada","Yadgir"];
  var Kerala = ["Alappuzha","Ernakulam","Idukki","Kannur","Kasaragod","Kollam","Kottayam","Kozhikode","Malappuram","Palakkad","Pathanamthitta","Thiruvananthapuram","Thrissur","Wayanad"];
  var MadhyaPradesh = ["Agar Malwa","Alirajpur","Anuppur","Ashoknagar","Balaghat","Barwani","Betul","Bhind","Bhopal","Burhanpur","Chhatarpur","Chhindwara","Damoh","Datia","Dewas","Dhar","Dindori","Guna","Gwalior","Harda","Hoshangabad","Indore","Jabalpur","Jhabua","Katni","Khandwa","Khargone","Mandla","Mandsaur","Morena","Narsinghpur","Neemuch","Panna","Raisen","Rajgarh","Ratlam","Rewa","Sagar","Satna",
  "Sehore","Seoni","Shahdol","Shajapur","Sheopur","Shivpuri","Sidhi","Singrauli","Tikamgarh","Ujjain","Umaria","Vidisha"];
  var Maharashtra = ["Ahmednagar","Akola","Amravati","Aurangabad","Beed","Bhandara","Buldhana","Chandrapur","Dhule","Gadchiroli","Gondia","Hingoli","Jalgaon","Jalna","Kolhapur","Latur","Mumbai City","Mumbai Suburban","Nagpur","Nanded","Nandurbar","Nashik","Osmanabad","Palghar","Parbhani","Pune","Raigad","Ratnagiri","Sangli","Satara","Sindhudurg","Solapur","Thane","Wardha","Washim","Yavatmal"];
  var Manipur = ["Bishnupur","Chandel","Churachandpur","Imphal East","Imphal West","Jiribam","Kakching","Kamjong","Kangpokpi","Noney","Pherzawl","Senapati","Tamenglong","Tengnoupal","Thoubal","Ukhrul"];
  var Meghalaya = ["East Garo Hills","East Jaintia Hills","East Khasi Hills","North Garo Hills","Ri Bhoi","South Garo Hills","South West Garo Hills","South West Khasi Hills","West Garo Hills","West Jaintia Hills","West Khasi Hills"];
  var Mizoram = ["Aizawl","Champhai","Kolasib","Lawngtlai","Lunglei","Mamit","Saiha","Serchhip","Aizawl","Champhai","Kolasib","Lawngtlai","Lunglei","Mamit","Saiha","Serchhip"];
  var Nagaland = ["Dimapur","Kiphire","Kohima","Longleng","Mokokchung","Mon","Peren","Phek","Tuensang","Wokha","Zunheboto"];
  var Odisha = ["Angul","Balangir","Balasore","Bargarh","Bhadrak","Boudh","Cuttack","Debagarh","Dhenkanal","Gajapati","Ganjam","Jagatsinghpur","Jajpur","Jharsuguda","Kalahandi","Kandhamal","Kendrapara","Kendujhar","Khordha","Koraput","Malkangiri","Mayurbhanj","Nabarangpur","Nayagarh","Nuapada","Puri","Rayagada","Sambalpur","Subarnapur","Sundergarh"];
  var Punjab = ["Amritsar","Barnala","Bathinda","Faridkot","Fatehgarh Sahib","Fazilka","Firozpur","Gurdaspur","Hoshiarpur","Jalandhar","Kapurthala","Ludhiana","Mansa","Moga","Mohali","Muktsar","Pathankot","Patiala","Rupnagar","Sangrur","Shaheed Bhagat Singh Nagar","Tarn Taran"];
  var Rajasthan = ["Ajmer","Alwar","Banswara","Baran","Barmer","Bharatpur","Bhilwara","Bikaner","Bundi","Chittorgarh","Churu","Dausa","Dholpur","Dungarpur","Ganganagar","Hanumangarh","Jaipur","Jaisalmer","Jalore","Jhalawar","Jhunjhunu","Jodhpur","Karauli","Kota","Nagaur","Pali","Pratapgarh","Rajsamand","Sawai Madhopur","Sikar","Sirohi","Tonk","Udaipur"];
  var Sikkim = ["East Sikkim","North Sikkim","South Sikkim","West Sikkim"];
  var TamilNadu = ["Ariyalur","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Salem","Sivaganga","Thanjavur","Theni","Thoothukudi","Tiruchirappalli","Tirunelveli","Tiruppur","Tiruvallur","Tiruvannamalai","Tiruvarur","Vellore","Viluppuram","Virudhunagar"];
  var Telangana = ["Adilabad","Bhadradri Kothagudem","Hyderabad","Jagtial","Jangaon","Jayashankar","Jogulamba","Kamareddy","Karimnagar","Khammam","Komaram Bheem","Mahabubabad","Mahbubnagar","Mancherial","Medak","Medchal","Nagarkurnool","Nalgonda","Nirmal","Nizamabad","Peddapalli","Rajanna Sircilla","Ranga Reddy","Sangareddy","Siddipet","Suryapet","Vikarabad","Wanaparthy","Warangal Rural","Warangal Urban","Yadadri Bhuvanagiri"];
  var Tripura = ["Dhalai","Gomati","Khowai","North Tripura","Sepahijala","South Tripura","Unakoti","West Tripura"];
  var UttarPradesh = ["Agra","Aligarh","Allahabad","Ambedkar Nagar","Amethi","Amroha","Auraiya","Azamgarh","Baghpat","Bahraich","Ballia","Balrampur","Banda","Barabanki","Bareilly","Basti","Bhadohi","Bijnor","Budaun","Bulandshahr","Chandauli","Chitrakoot","Deoria","Etah","Etawah","Faizabad","Farrukhabad","Fatehpur","Firozabad","Gautam Buddha Nagar","Ghaziabad","Ghazipur","Gonda","Gorakhpur","Hamirpur","Hapur","Hardoi","Hathras","Jalaun","Jaunpur","Jhansi","Kannauj","Kanpur Dehat","Kanpur Nagar","Kasganj","Kaushambi","Kheri","Kushinagar","Lalitpur","Lucknow","Maharajganj","Mahoba","Mainpuri","Mathura","Mau","Meerut","Mirzapur","Moradabad","Muzaffarnagar","Pilibhit","Pratapgarh","Raebareli","Rampur","Saharanpur","Sambhal","Sant Kabir Nagar","Shahjahanpur","Shamli","Shravasti","Siddharthnagar","Sitapur","Sonbhadra","Sultanpur","Unnao","Varanasi"];
  var Uttarakhand  = ["Almora","Bageshwar","Chamoli","Champawat","Dehradun","Haridwar","Nainital","Pauri","Pithoragarh","Rudraprayag","Tehri","Udham Singh Nagar","Uttarkashi"];
  var WestBengal = ["Alipurduar","Bankura","Birbhum","Cooch Behar","Dakshin Dinajpur","Darjeeling","Hooghly","Howrah","Jalpaiguri","Jhargram","Kalimpong","Kolkata","Malda","Murshidabad","Nadia","North 24 Parganas","Paschim Bardhaman","Paschim Medinipur","Purba Bardhaman","Purba Medinipur","Purulia","South 24 Parganas","Uttar Dinajpur"];
  var AndamanNicobar = ["Nicobar","North Middle Andaman","South Andaman"];
  var Chandigarh = ["Chandigarh"];
  var DadraHaveli = ["Dadra Nagar Haveli"];
  var DamanDiu = ["Daman","Diu"];
  var Delhi = ["Central Delhi","East Delhi","New Delhi","North Delhi","North East Delhi","North West Delhi","Shahdara","South Delhi","South East Delhi","South West Delhi","West Delhi"];
  var Lakshadweep = ["Lakshadweep"];
  var Puducherry = ["Karaikal","Mahe","Puducherry","Yanam"];
  
  
  $("#inputState").change(function(){
    var StateSelected = $(this).val();
    var optionsList;
    var htmlString = "";
  
    switch (StateSelected) {
      case "Andra Pradesh":
          optionsList = AndraPradesh;
          break;
      case "Arunachal Pradesh":
          optionsList = ArunachalPradesh;
          break;
      case "Assam":
          optionsList = Assam;
          break;
      case "Bihar":
          optionsList = Bihar;
          break;
      case "Chhattisgarh":
          optionsList = Chhattisgarh;
          break;
      case "Goa":
          optionsList = Goa;
          break;
      case  "Gujarat":
          optionsList = Gujarat;
          break;
      case "Haryana":
          optionsList = Haryana;
          break;
      case "Himachal Pradesh":
          optionsList = HimachalPradesh;
          break;
      case "Jammu and Kashmir":
          optionsList = JammuKashmir;
          break;
      case "Jharkhand":
          optionsList = Jharkhand;
          break;
      case  "Karnataka":
          optionsList = Karnataka;
          break;
      case "Kerala":
          optionsList = Kerala;
          break;
      case  "Madya Pradesh":
          optionsList = MadhyaPradesh;
          break;
      case "Maharashtra":
          optionsList = Maharashtra;
          break;
      case  "Manipur":
          optionsList = Manipur;
          break;
      case "Meghalaya":
          optionsList = Meghalaya ;
          break;
      case  "Mizoram":
          optionsList = Mizoram;
          break;
      case "Nagaland":
          optionsList = Nagaland;
          break;
      case  "Orissa":
          optionsList = Orissa;
          break;
      case "Punjab":
          optionsList = Punjab;
          break;
      case  "Rajasthan":
          optionsList = Rajasthan;
          break;
      case "Sikkim":
          optionsList = Sikkim;
          break;
      case  "Tamil Nadu":
          optionsList = TamilNadu;
          break;
      case  "Telangana":
          optionsList = Telangana;
          break;
      case "Tripura":
          optionsList = Tripura ;
          break;
      case  "Uttaranchal":
          optionsList = Uttaranchal;
          break;
      case  "Uttar Pradesh":
          optionsList = UttarPradesh;
          break;
      case "West Bengal":
          optionsList = WestBengal;
          break;
      case  "Andaman and Nicobar Islands":
          optionsList = AndamanNicobar;
          break;
      case "Chandigarh":
          optionsList = Chandigarh;
          break;
      case  "Dadar and Nagar Haveli":
          optionsList = DadraHaveli;
          break;
      case "Daman and Diu":
          optionsList = DamanDiu;
          break;
      case  "Delhi":
          optionsList = Delhi;
          break;
      case "Lakshadeep":
          optionsList = Lakshadeep ;
          break;
      case  "Pondicherry":
          optionsList = Pondicherry;
          break;
  }
  
  
    for(var i = 0; i < optionsList.length; i++){
      htmlString = htmlString+"<option value='"+ optionsList[i] +"'>"+ optionsList[i] +"</option>";
    }
    $("#inputDistrict").html(htmlString);
  
  });


  document.addEventListener('click', function(event) {
    var dropdown = document.getElementById('Demo');
    var button = document.getElementById('profileImage'); 
  
    if (!event.target.closest('.w3-dropdown-click') && event.target !== button) {
      if (dropdown.classList.contains('w3-show')) {
        dropdown.classList.remove('w3-show');
      }
    }
  });
  
  
  function myFunction(event) {
    var dropdown = document.getElementById('Demo');
    if (dropdown.classList.contains('w3-show')) {
      dropdown.classList.remove('w3-show');
    } else {
      dropdown.classList.add('w3-show');
    }
    event.stopPropagation();
  }
  
  
  function Deleteprofile() {
    const fileInput = document.getElementById("fileInput");
    const profileImage = document.getElementById("profileImage");
    if (fileInput.files.length > 0) {
       const but = document.getElementById("submitimg");
       but.click();
    }
}
  
  function updateProfileImage(){
    const fileInput = document.getElementById("fileInput");
    const profileImage = document.getElementById("profileImage");
    if (fileInput.files.length > 0) {
       const but = document.getElementById("submitimg");
       but.click();
    }
  }
  
  function editBio() {
    document.getElementById("bioText").style.display = "none";
    document.getElementById("editInput").style.display = "block";
    document.getElementById("saveButton").style.display = "inline-block";
    document.getElementById("editbutton").style.display = "none";
}

function saveBio() {
    var editedBio = document.getElementById("editInput").value;
    if (editedBio.length > 150) {
    editedBio = editedBio.substring(0, 150);
}
    document.getElementById("bioText").style.display = "block";
    document.getElementById("editInput").style.display = "none";
    document.getElementById("saveButton").style.display = "none";
    document.getElementById("editbutton").style.display = "inline-block";
    
}

</script>
{% endblock %}
